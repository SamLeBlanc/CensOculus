<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>CensOculus</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">

  <link href="https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.js"></script>

  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

  <script src="https://d3js.org/d3.v5.min.js"></script>

  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"></script>
  <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css" type="text/css">

  <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles/styles.css">
  <link rel="stylesheet" href="styles/sidebar.css">
  <link rel="stylesheet" href="styles/draggable.css">
  <link rel="stylesheet" href="styles/tables.css">
  <link rel="stylesheet" href="styles/tour.css">

  <script type="text/javascript" src="index.js"></script>
  <script type="text/javascript" src="scripts/dataPipeline.js"></script>
  <script type="text/javascript" src="scripts/dictionaries.js"></script>
  <script type="text/javascript" src="scripts/customValues.js"></script>
  <script type="text/javascript" src="scripts/featureStates.js"></script>
  <script type="text/javascript" src="scripts/numberFormats.js"></script>
  <script type="text/javascript" src="scripts/coloring.js"></script>
  <script type="text/javascript" src="scripts/tableJunk.js"></script>
  <script type="text/javascript" src="scripts/setup.js"></script>
  <script type="text/javascript" src="scripts/flags.js"></script>
  <script type="text/javascript" src="scripts/mapControls.js"></script>
  <script type="text/javascript" src="scripts/settings.js"></script>
  <script type="text/javascript" src="scripts/title.js"></script>
  <script type="text/javascript" src="scripts/quartiles.js"></script>
  <script type="text/javascript" src="scripts/map.js"></script>
  <script type="text/javascript" src="scripts/loading.js"></script>
  <script type="text/javascript" src="scripts/filters.js"></script>
  <script type="text/javascript" src="scripts/sourcesLayers.js"></script>
  <script type="text/javascript" src="scripts/painting.js"></script>
  <script type="text/javascript" src="scripts/hoverHoldStates.js"></script>
  <script type="text/javascript" src="scripts/lens.js"></script>
  <script type="text/javascript" src="scripts/wikis.js"></script>
  <script type="text/javascript" src="scripts/heldData.js"></script>
  <script type="text/javascript" src="scripts/dynamicStyling.js"></script>
  <script type="text/javascript" src="scripts/tagging.js"></script>
  <script type="text/javascript" src="scripts/tour.js"></script>
  <script type="text/javascript" src="scripts/realms.js"></script>
  <script type="text/javascript" src="scripts/browserDefaults.js"></script>
  <script type="text/javascript" src="scripts/legend.js"></script>
  <script type="text/javascript" src="scripts/saveMap.js"></script>
  <script type="text/javascript" src="scripts/featureQuerying.js"></script>
  <script type="text/javascript" src="scripts/fullscreen.js"></script>
</head>
<body>
  <div id="map"></div>
  <div id="blocker" style="position:fixed; z-index:1000; top:0; left:0; margin: -100px; height: 4000px; width:4000px; background-color:transparent"></div>
  <div id="title">
    <span>CensOculus</span>
    <span style="position: relative; top: 3px; color: white; font-size: 16px; -webkit-text-stroke: 0px white;">Beta</span>
    <div id="author" style="font-weight: 900; font-size:24px; margin-top: -7px; -webkit-text-stroke: 0px white; padding-left:1px;">
      <a id="author-name" href="https://github.com/SamLeBlanc/" target="_blank" style=" transition: 0.3s;color: white; text-decoration: none;">&nbspSam LeBlanc&nbsp&nbsp</a>
      <a href="https://github.com/SamLeBlanc/Census-Mapper">
        <img src="images/github.png" width="25" height="25" style="position: relative; top:3px;"></a>&nbsp&nbsp
        <a id="author-tour" href="javascript:takeTour(0)" style="font-weight: 800; color: white; cursor: pointer; text-decoration: none;">
          <span id="-author-tour" style="transition: 0.3s; font-size:0.85em">Take the Tour!</span>
        </a>
      </div>
    </div>
    <div style="position:fixed; z-index:0;">
      <div style="padding: 10px 3px; font-size:0.8em;">
        <div id="slider-range" style="background-color:darkgrey;" ></div>
      </div>
    </div>

    <div id="sidebars">
      <div id="right-sidebars">
        <!-- Lens -->
        <div id="sidebar0" class="sidebar" style="position: fixed;">
          <div style="padding-bottom: 5px;">
            <span id="lens-name" style="font-size: 25px;"></span>
          </div>
          <div>
            <div>
              <img class="tag-label" src="images/tag-pop.png">
              <span id="lens-pop" style="font-size: 1.2em; font-weight:600;"></span>
              <span style="font-size: 1.2em;">ðŸ‘¤</span>
            </div>
            <div>
              <img class="tag-label" src="images/tag-geoid.png">
              <span id="lens-geoid"></span>
            </div>
            <div>
              <img class="tag-label" src="images/tag-area.png">
              <span id="lens-area"></span>
              <span>mi<sup>2</sup></span>
            </div>
            <div>
              <img class="tag-label" src="images/tag-den.png">
              <span id="lens-density"></span>
              <span>ðŸ‘¤/mi<sup>2</sup></span>
            </div>
            <div style="padding: 5px; font-size:16px;">
              <div id="lens-hrefs" style="font-weight: 700;">
                <a id="wiki-link" href="" target="_blank">Wiki</a>
                &nbsp&nbsp
                <a id="flag-link" href="" target="_blank">Flag</a>
                &nbsp&nbsp
                <button onclick="clearAllHolds(); $('#move-window').css({top:-400});">Clear Holds</button>
              </div>
            </div>
            <div id="held-data"></div>
          </div>

        </div>
      </div>
      <div id="left-sidebars">
        <div id="sidebar1" class="sidebar" style="background-color: #A4DFA7;" >
          <div>
            <span class="sidebar-title">Welcome!</span>
          </div>
          <span>
            <span style="font-size:1.1em;"><b>CensOculus</b></span> is a dynamic and interactive data visualization of the
            <a href="https://en.wikipedia.org/wiki/United_States_census" target="_blank" style="font-weight:bold;">United States Census</a>.
            Users can explore the map for fun, or customize it to fit virtually any need. The possibilties are endless!
          </span>
          <div style="padding:5px"></div>
          <span>
            If this is your first time here, please take the
            <a href="javascript:takeTour(0)" style="font-weight:bold;">tour!</a>
          </span>
          <div style="padding:5px"></div>
          <span>
            Created using
            <a href="https://www.mapbox.com/mapbox-gljs" target="_blank" style="font-weight:bold;">Mapbox GL JS</a>,
            CensOculus illustrates the power and versatility of the
            <a href="https://www.mapbox.com/" target="_blank">Mapbox</a> suite.
            Mapbox provides an exceptional framework, complete with hundreds of
            <a href="https://docs.mapbox.com/mapbox-gl-js/example/" target="_blank">examples</a>
            to get started.
          </span>
          <div style="padding:5px"></div>
          <span>
            CensOculus was created by <b>Sam LeBlanc</b>.
            The code is available on
            <a href="https://github.com/SamLeBlanc/Census-Mapper" style="font-weight:bold;" target="_blank">Github</a>.
            CensOculus is my first front-end project, and my first major project with Mapbox, so please be nice. Thank you for stopping by!
          </span>
          <div style="padding:2px;"></div>
        </div>
        <div id="sidebar2" class="sidebar" style="background-color: #B1E6FB;" >
          <div>
            <span class="sidebar-title">Land Acknowledgement</span>
          </div>
          <div class="sidebar-q">
            <img src="images/question.png" class="sidebar-q-img" width="25" height="25" onclick="window.open('https://americanindian.si.edu/nk360/informational/land-acknowledgement', '_blank').focus();">
          </div>

          <div class="sidebar-subtitle">
            <i>This map was made while occupying the stolen land of the Duwamish, Salish, and Nacotchtank peoples.</i>
          </div>
          <div style="font-size:0.91em;">
            <div style="padding-top:6px;">
              Human beings have lived in North America for <span style="color:darkgreen; font-weight:900;">more than 120,000 years</span>;
              creating a cultural history both vibrant and diverse.
              Ancestral historians estimate that <span style="color:darkgreen; font-weight:900;">tens of thousands of unique groups</span> lived here during that time.
            </div>
            <div style="padding-top:8px;">
              Indigenous Americans lived predominantly in hunter-gatherer groups with loosely-defined territory that was ever-changing.
              The current <span style="color:darkgreen; font-weight:900;">map shows the territory of many of the tribes</span> that lived here during the last millennium.
              The data was borrowed from <a style="font-weight:bold;" href='https://native-land.ca/' target="_blank">Native-Land.ca</a>,
              please visit and support their site to learn about the territory, languages, and treaties of Native peoples. <br>
            </div>
            <div style="padding-top:8px;">
              The United States and its decennial census have existed for less than 250 years,
              about <span style="color:darkgreen; font-weight:900;">0.2%</span>
              (or <span style="color:darkgreen; font-weight:900;">1/400<sup>th</sup></span> of the time that humans have lived here.
              To properly understand the context of the Census, it must be remembered that the United States
              was built (very recently!) on <span style="color:darkgreen; font-weight:900;">stolen land with stolen lives and resources</span>.
            </div>
            <div style="padding-top:8px;">
              Although the Census has made progress over time, it is still rife with inequities.
              In 2010, the Census Bureau estimated that Native populations living on reservations or in Native villages were <span style="color:darkgreen; font-weight:900;">undercounted by almost 5%</span>.
              That is <span style="color:darkgreen; font-weight:900;">more than double the undercount rate</span> of the next closest population group.
              Considering the shortened timeline for the 2020 Census, due to COVID-19, the <span style="color:darkgreen; font-weight:900;">undercount rate will likely be higher this time around</span>.
            </div>
          </div>
        </div>
        <div id="sidebar3" class="sidebar" style="background-color: #CABDEF;" >
          <div class="sidebar-q">
            <img src="images/question.png" class="sidebar-q-img" width="25" height="25" onclick="takeTour(3)">
          </div>
          <div id="settings">
            <div>
              <span class="sidebar-title">Data Settings</span>
            </div>
            <div class="sidebar-subtitle">
              <i>Select what data to map with the options below!</i>
            </div>
            <div style="color:#333">
              <table>
                <tr>
                  <td>
                    <span>Year</span>
                  </td>
                  <td>
                    <div id="-year" style="padding:8px 0px 5px 0px;">
                      <select id="year-select-" onchange="collectSettings(); update();">
                        <option value="00" disabled>2000</option>
                        <option value="10">2010</option>
                        <option value="20" disabled>2020</option>
                      </select>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <span>Geography&nbsp&nbsp&nbsp</span>
                  </td>
                  <td>
                    <div id="-geography" style="padding:5px 0px;">
                      <select id="geo-select-" onchange="startLoadingIcon(1); updateGeo(); update();">
                        <option value="nation">Nation</option>
                        <option value="state" selected>State</option>
                        <option value="county">County</option>
                        <option value="csub">County Subdivision</option>
                        <option value="place">Place</option>
                        <option value="tract">Tract</option>
                        <option value="group">Group</option>
                        <option value="cbsa">M(et)(ic)ro Stat Area</option>
                        <option value="urban">Urban Area</option>
                        <option value="zip">Zip Code</option>
                        <option value="uschool">Unified School Dist</option>
                      </select>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <span>Realm</span>
                  </td>
                  <td>
                    <div id="-realm" style="padding:5px 0px;">
                      <select id="realm-select-" style="width:153px;" onclick="updateRealm();">
                        <option value="Total" selected>Total Population</option>
                        <option value="Race">Race</option>
                        <option value="Ethnicity">Ethnicity</option>
                        <option value="Rurality">Urban/Rural</option>
                        <option value="Housing">Housing</option>
                        <option value="Age" >Age</option>
                        <option value="Sex" >Sex</option>
                        <option value="Families">Families</option>
                        <option value="Group Quarters" >Group Quarters</option>
                        <option value="Other" >Other</option>
                      </select>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <span>Concept</span>
                  </td>
                  <td>
                    <div id="-concept" style="padding:5px 0px;">
                      <select id="concept-select-" style="width:250px;" onchange="collectSettings(); updateConcept();">
                        <option value="" disabled>Select a Concept</option>
                        <option value="P1" selected>Total Population</option>
                      </select>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <span>Variable</span>
                  </td>
                  <td>
                    <div id="-variable" style="padding:5px 0px;">
                      <select id="variable-select-0" style="width:250px;" onchange="collectSettings(); update();"></select>
                    </div>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>
        <div id="sidebar4" class="sidebar" style="background-color: #DDA7C8;" >
          <div>
            <span class="sidebar-title">Color Settings</span>
          </div>
          <div class="sidebar-q">
            <img src="images/question.png" class="sidebar-q-img" width="25" height="25" onclick="takeTour(9)">
          </div>
          <div class="sidebar-subtitle" style="font-size:0.98em;">
            <i>Change the look of the map with these style settings</i>
          </div>
          <div style="color: #333; font-size: 1.1em; font-weight:bold">
            <div id="-scale" style="padding-top:15px;">
              <span>Scale&nbsp&nbsp</span>
              <select id="scale-select" onchange="startLoadingIcon(1); collectSettings(); update();">
                <option value="Linear" >Linear</option>
                <option value="Quartile" >Quartile</option>
                <option value="Log" >Log</option>
              </select>
              <span style="font-size:0.65em;"><i>&nbspChanging can be slow with many tiles</i></span>
            </div>
            <div id="colors-select" style="padding-top:8px;">
              <div "-scheme">
                <span>Scheme&nbsp</span>
                <select id="color-select" onchange="customColors=[null,null,null,null,null]; collectSettings(); update()">
                  <option value="Viridis">Viridis</option>
                  <option value="Red">Red</option>
                  <option value="Blue">Blue</option>
                  <option value="Green">Green</option>
                  <option value="Purple">Purple</option>
                  <option value="Black">Black</option>
                  <option value="Rainbow">Rainbow</option>
                  <option value="Viridis Light">Viridis Light</option>
                  <option value="Greyscale">Greyscale</option>
                  <option value="Heat">Heat</option>
                  <option value="Magma">Magma</option>
                  <option value="Brown-Teal">Brown-Teal</option>
                  <option value="Blue-Red">Blue-Red</option>
                  <option value="Green II">Green II</option>
                  <option value="Purple II">Purple II</option>
                  <option value="Ocean">Ocean</option>
                  <option value="Valentine">Valentine</option>
                  <option value="Forest">Forest</option>
                  <option value="Burnt Toast">Toast</option>
                  <option value="Cividis">Cividis</option>
                  <option value="Plasma">Plasma</option>
                  <option value="Warm">Warm</option>
                  <option value="Cool">Cool</option>
                  <option value="Barney">Barney</option>
                  <option value="Watermelon">Watermelon</option>
                </select>
                <button style="width: 49px;" onclick="reverseColorScheme(); updatePaint();">Invert</button>
              </div>
              <div style="padding-top:8px"></div>
              <div "-tile-opacity" style="padding-top: 1px;">
                <span>Tile Opacity&nbsp</span>
                <input id="tileopacity-v" type="range" min="0" max="1" step=".01" value="0.75" oninput="collectSettings(); setFillOpacity()" style="top: 7px;position: relative;">
                <span id="to-label">0.5</span>
              </div>
              <div style="padding-top: 8px;">
                <span>Opacity Mask&nbsp&nbsp</span>
                <input type="checkbox" id="opacity-mask" name="opacity-mask" onclick="updatePaint();">
              </div>
              <div style="padding-top: 8px;">
                <span>Line Width&nbsp</span>
                <input id="linewidth-v" type="range" min="0" max="10" step=".1" value="0" oninput="collectSettings(); setLineWidth();" style="top: 7px;position: relative;">
                <span id="lw-label">0</span>
              </div>
            </div>
          </div>
        </div>
        <div id="sidebar5" class="sidebar" style="background-color: #F8B5BE;" >
          <div>
            <span class="sidebar-title">Experimental Settings</span>
          </div>
          <div class="sidebar-q">
            <img src="images/question.png" class="sidebar-q-img" width="25" height="25" onclick="takeTour(12)">
          </div>
          <div id="-modes" style="padding-top:15px;">
            <span class="settings-subtitle">Modes&nbsp&nbsp&nbsp</span>
            <span>Flag&nbsp</span>
            <input type="checkbox" id="flag-mode" name="flag-mode" onclick="collectSettings(); updateFlagMode()">
            <span>&nbsp&nbspWiki&nbsp</span>
            <input type="checkbox" id="wiki-mode" name="wiki-mode" onclick="collectSettings()">
          </div>
          <div id="-3d" style="padding-top:10px;">
            <span class="settings-subtitle">3D&nbsp</span>
            <input type="checkbox" id="3d-mode" name="3d-mode" onclick="collectSettings(); updatePaint()">
            <span>&nbsp&nbspHeight&nbsp&nbsp&nbsp</span>
            <input id="height" type="range" min="10" max="3000000" step="5000" value="100000" oninput="collectSettings(); updatePaint()" style="top: 7px;position: relative;">
          </div>
          <div id="-num-format" style="padding-top:15px;">
            <span class="settings-subtitle">Number Format&nbsp&nbsp&nbsp</span>
            <select id="numformat-select">
              <option value="short">Short</option>
              <option value="comma" selected>Commas</option>
            </select>
          </div>
          <div id="-map-views" style="padding-top:15px;">
            <span class="settings-subtitle">Map Views&nbsp&nbsp&nbsp</span>
            <button onclick="lower48View()">Lower 48</button>
            <button onclick="full52View()">Full 52</button>
            <button onclick="alaskaView()">AK</button>
            <button onclick="hawaiiView()">HI</button>
            <button onclick="puertoRicoView()">PR</button>
          </div>
          <div id="-map-controls" style="padding-top:15px;">
            <span class="settings-subtitle">Map Controls</span>
            <div style="padding:1px;"></div>
            <span>Zoom&nbsp</span>
            <input id="zoom-v" type="range" min="2" max="14" step="0.01" value="3.6" oninput="collectSettings(); updateZoom(this.value)" style="top: 7px;position: relative;">
            <span id="zoom-label">3.6</span>
            <div style="padding:1px;"></div>
            <span>Pitch&nbsp</span>
            <input id="pitch-v" type="range" min="0" max="90" step="1" value="0" oninput="collectSettings(); updatePitch(this.value)" style="top: 7px;position: relative;">
            <span id="pitch-label">0</span>
            <div style="padding:1px;"></div>
            <span>Bearing&nbsp</span>
            <input id="bearing-v" type="range" min="-180" max="180" step="15" value="0" oninput="collectSettings(); updateBearing(this.value)" style="top: 7px;position: relative;">
            <span id="bearing-label">0</span>
          </div>
          <div id="-bbox-border" style="padding-top:15px;">
            <span class="settings-subtitle">Hide Cursor Box</span>
            <input type="checkbox" checked id="bbox-border" name="bbox-border" onclick="drawBBox()">
            &nbsp&nbsp
            <span style="color:#666; font-size:0.8em;"><b><i>Change box size with [ and ]</i></b></span>
          </div>



        </div>
        <div id="sidebar6" class="sidebar" style="background-color: #FFCC99;" >
          <div>
            <span class="sidebar-title">Filter</span>
          </div>
          <div class="sidebar-subtitle">
            <i>Hide tiles based on the selection criteria below.</i>
          </div>
          <div class="sidebar-q">
            <img src="images/question.png" class="sidebar-q-img" width="25" height="25" onclick="takeTour(11)">
          </div>
          <div style="padding:2px;"></div>
          <div>
            <div><span class="settings-subtitle">By Geography&nbsp&nbsp</span></div>
            <div style="padding-top:6px;"></div>
            <div>
              <table>
                <tr>
                  <td>
                    <span>View By&nbsp&nbsp</span>
                  </td>
                  <td>
                    <select id="geo-select-1" onchange="SETTINGS['Geo'] = this.value; distributeSettings(); update();">
                      <option value="nation">Nation</option>
                      <option value="state" selected>State</option>
                      <option value="county">County</option>
                      <option value="csub">County Subdivision</option>
                      <option value="place">Place</option>
                      <option value="tract">Tract</option>
                      <option value="group">Group</option>
                      <option value="cbsa">M(et)(ic)ro Stat Area</option>
                      <option value="urban">Urban Area</option>
                      <option value="zip">Zip Code</option>
                      <option value="uschool">Unified School Dist</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td>
                    <span>State&nbsp&nbsp</span>
                  </td>
                  <td>
                    <select id="state-filter-select" style="width:205px;" onchange="filterByGeoid(this.value)">
                      <option value="0" selected disabled>Select a State</option>
                      <option value="01" >Alabama</option>
                      <option value="02" >Alaska</option>
                      <option value="04" >Arizona</option>
                      <option value="05" >Arkansas</option>
                      <option value="06" >California</option>
                      <option value="08" >Colorado</option>
                      <option value="09" >Connecticut</option>
                      <option value="10" >Delaware</option>
                      <option value="11" >District of Columbia</option>
                      <option value="12" >Florida</option>
                      <option value="13" >Georgia</option>
                      <option value="15" >Hawaii</option>
                      <option value="16" >Idaho</option>
                      <option value="17" >Illinois</option>
                      <option value="18" >Indiana</option>
                      <option value="19" >Iowa</option>
                      <option value="20" >Kansas</option>
                      <option value="21" >Kentucky</option>
                      <option value="22" >Louisiana</option>
                      <option value="23" >Maine</option>
                      <option value="24" >Maryland</option>
                      <option value="25" >Massachusetts</option>
                      <option value="26" >Michigan</option>
                      <option value="27" >Minnesota</option>
                      <option value="28" >Mississippi</option>
                      <option value="29" >Missouri</option>
                      <option value="30" >Montana</option>
                      <option value="31" >Nebraska</option>
                      <option value="32" >Nevada</option>
                      <option value="33" >New Hampshire</option>
                      <option value="34" >New Jersey</option>
                      <option value="35" >New Mexico</option>
                      <option value="36" >New York</option>
                      <option value="37" >North Carolina</option>
                      <option value="38" >North Dakota</option>
                      <option value="39" >Ohio</option>
                      <option value="40" >Oklahoma</option>
                      <option value="41" >Oregon</option>
                      <option value="42" >Pennsylvania</option>
                      <option value="72" >Puerto Rico</option>
                      <option value="44" >Rhode Island</option>
                      <option value="45" >South Carolina</option>
                      <option value="46" >South Dakota</option>
                      <option value="47" >Tennessee</option>
                      <option value="48" >Texas</option>
                      <option value="49" >Utah</option>
                      <option value="50" >Vermont</option>
                      <option value="51" >Virginia</option>
                      <option value="78" >Virgin Islands</option>
                      <option value="53" >Washington</option>
                      <option value="54" >West Virginia</option>
                      <option value="55" >Wisconsin</option>
                      <option value="56" >Wyoming</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td>
                    <span>County&nbsp&nbsp</span>
                  </td>
                  <td>
                    <select id="county-filter-select" style="width:205px;" onchange="filterByGeoid(this.value)">
                      <option disabled selected value="0" >Select a State</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td>
                    <span>GEOID&nbsp&nbsp</span>
                  </td>
                  <td>
                    <input type="text" id="filter-custom" name="filter-custom" placeholder="Start typing GEOID here" size="13" onkeyup="filterByGeoid($('#filter-custom').val()); resetFilterSelects();">
                    <button onclick="filterReset()">Reset</button>
                  </td>
                </tr>
                <tr>
                  <td>

                  </td>
                  <td>
                  </td>
                </tr>
              </table>
            </div>
            <div style="padding-top:10px;">
              <div><span class="settings-subtitle">By Value&nbsp&nbsp</span></div>
              <div style="padding-top:3px;">
                <div>
                  <table>
                    <tr>
                      <td>
                        <span>Variable&nbsp&nbsp</span>
                      </td>
                      <td>
                        <select id="variable-select-1" style="width:269px;" onchange="SETTINGS['Variable']=this.value; distributeSettings(); update();"></select>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <span>Value</span>
                      </td>
                      <td>
                        <select id="value-sign" style="width:100px;">
                          <option value="<" >less than</option>
                          <option value=">" >more than</option>
                          <option value="a" >around</option>
                        </select>
                        <input type="text" id="value-value" name="value-value" placeholder="" size="4">
                        <button type="submit" onclick="filterByValue($('#variable-select-1').val(),$('#value-value').val(),$('#value-sign').val())">Go</button>
                        <button onclick="filterReset()">Reset</button>
                      </td>
                    </tr>
                  </table>
                </div>
              </div>

            </div>
          </div>
          <div style="padding:5px;"></div>
        </div>
        <div id="sidebar7" class="sidebar" style="background-color: #FCF99C;" >
          <div>
            <span class="sidebar-title">Save Map</span>
          </div>
          <div class="sidebar-subtitle">
            <i>Copy or paste a token to save or open a map. <br> An invalid token will open the default map.</i>
          </div>
          <div class="sidebar-q">
            <img src="images/question.png" class="sidebar-q-img" width="25" height="25" onclick="takeTour(10)">
          </div>
          <div style="padding-top:10px;">
            <button id="copy-button" type="submit" onclick="copyButton()" style="font-size:1.05em">Copy</button>
            <button id="go-button" type="submit" onclick="goButton()" style="font-size:1.05em">Go</button>
            <span>&nbsp&nbsp</span>
            <span id='save-message' style="font-weight:bold;"></span>
          </div>
          <div style="padding-top:10px;">
            <textarea id="settings-json" name="settings-json" rows="10" cols="47" style="position: relative; width: 355px; "></textarea>
          </div>
        </div>
        <div id="sidebar8" class="sidebar" style="background-color: #A4DFA7;" >
          <div>
            <span class="sidebar-title">Tagged Places</span>
          </div>
          <div class="sidebar-subtitle">
            <i>Tag groups of places for easy access ~ Coming soon</i>
          </div>
          <div id="tag-div" style="padding-top:4px;">
            <span id="tag-text"></span>
          </div>
        </div>
      </div>
    </div>
    <div>
      <div id="accumulate-button" style="position: fixed; top:-1000px; left:-1000px;">
        <input type="checkbox" id="accumulate" name="accumulate">
      </div>
    </div>
  </div>
  <div id="loading-icons">
    <div id='loading-1' class="loader" style="border-top: 8px solid #3498db"></div>
    <div id='loading-2' class="loader" style="border-top: 8px solid #be66d1"></div>
  </div>
  <div id="sidebar-buttons">
    <button id="iconbtn-1" class="iconbtn" onclick="openNav(1)">
      <div class="tooltip">
        <img src="images/chat.png" class="icon-img" width="25" height="25">
        <span id="tooltip-1" class="tooltiptext">Blurb</span>
      </div>
    </button>
    <br>
    <button id="iconbtn-2" class="iconbtn" onclick="openNav(2)">
      <div class="tooltip">
        <img src="images/land.png" class="icon-img" width="25" height="25">
        <span id="tooltip-2" class="tooltiptext">Land Acknowledgement</span>
      </div>
    </button>
    <br>
    <button id="iconbtn-3" class="iconbtn" onclick="openNav(3)">
      <div class="tooltip">
        <img src="images/gear.png" class="icon-img" width="25" height="25">
        <span id="tooltip-3" class="tooltiptext">Data Settings</span>
      </div>
    </button>
    <br>
    <button id="iconbtn-4" class="iconbtn" onclick="openNav(4)">
      <div class="tooltip">
        <img src="images/colors.png" class="icon-img" width="25" height="25">
        <span id="tooltip-4" class="tooltiptext">Colors</span>
      </div>
    </button>
    <br>
    <button id="iconbtn-5" class="iconbtn" onclick="openNav(5)">
      <div class="tooltip">
        <img src="images/advanced.png" class="icon-img" width="25" height="25">
        <span id="tooltip-5" class="tooltiptext">Experimental</span>
      </div>
    </button>
    <button id="iconbtn-6" class="iconbtn" onclick="openNav(6)">
      <div class="tooltip">
        <img src="images/filter.png" class="icon-img" width="25" height="25">
        <span id="tooltip-6" class="tooltiptext">Filter</span>
      </div>
    </button>
    <button id="iconbtn-7" class="iconbtn" onclick="openNav(7)">
      <div class="tooltip">
        <img src="images/save.png" class="icon-img" width="25" height="25">
        <span id="tooltip-7" class="tooltiptext">Save Map</span>
      </div>
    </button>
    <button id="iconbtn-8" class="iconbtn" onclick="openNav(8)">
      <div class="tooltip">
        <img src="images/tag.png" class="icon-img" width="25" height="25">
        <span id="tooltip-8" class="tooltiptext">Tags</span>
      </div>
    </button>
    <div style="padding:15px;"></div>
    <div>
      <button id="iconbtn-10" class="iconbtn" onclick="updateTack()" style="margin:3px; border: solid 2px transparent; ">
        <div class="tooltip">
          <img src="images/pin.png" width="25" height="25" style="position: relative; top:4px; padding: 2px;">
          <span id="iconbtn-10" class="tooltiptext">Pin Window</span>
        </div>
      </button>
    </div>
    <div style="position:relative; top:-5px;">
      <button id="iconbtn-11" class="iconbtn" onclick="accumulateShortcut(); updateAcc();" style="margin:3px; border: solid 2px transparent; ">
        <div class="tooltip">
          <div class="tooltip">
            <img src="images/plus.png" width="25" height="25" style="position: relative; top:4px">
            <span id="iconbtn-11" class="tooltiptext">Accumulate</span>
          </div>
        </div>
      </button>
    </div>
    <div style="position:relative; top:-10px;">
      <button id="iconbtn-12" class="iconbtn" onclick="updateFull()" style="margin:3px; border: solid 2px transparent; ">
        <div class="tooltip">
          <div class="tooltip">
            <img src="images/full.png" width="25" height="25" style="position: relative; top:3px; left:1px;">
            <span id="iconbtn-12" class="tooltiptext">Full Screen</span>
          </div>
        </div>
      </button>
    </div>
  </div>
  <div id="flag-view">
    <img id="flag_img" src="" style="width: auto; height: 250px;">
  </div>
  <div id="legend-">
    <div class="draggable" id="drag-1" style="left:-1000px;top:0;z-index:20;">
      <div class="box">
        <div id="legend">
          <div id="sqaures">
            <div style="padding:3px;">
              <div id='cwrap-0' class="color-picker-wrapper"><input type="color" value="transparent" id="cpick-0"></div>
              <div id="leg-square-0" class="legend-square" style="background:transparent;"></div>
            </div>
            <div style="padding:3px;">
              <div id='cwrap-1' class="color-picker-wrapper"><input type="color" value="transparent" id="cpick-1"></div>
              <div id="leg-square-1" class="legend-square" style="background:transparent;"></div>
            </div>
            <div style="padding:3px;">
              <div id='cwrap-2' class="color-picker-wrapper"><input type="color" value="transparent" id="cpick-2"></div>
              <div id="leg-square-2" class="legend-square" style="background:transparent;"></div>
            </div>
            <div style="padding:3px;">
              <div id='cwrap-3' class="color-picker-wrapper"><input type="color" value="transparent" id="cpick-3"></div>
              <div id="leg-square-3" class="legend-square" style="background:transparent;"></div>
            </div>
            <div style="padding:3px;">
              <div id='cwrap-4' class="color-picker-wrapper"><input type="color" value="transparent" id="cpick-4"></div>
              <div id="leg-square-4" class="legend-square" style="background:transparent;"></div>
            </div>
            <div style="position:relative; height: 25px; width: 1px; left: 20px;"></div>
            <div>
              <div style="padding:3px;">
                <div id='cwrap-6' class="color-picker-wrapper"><input type="color" value="#32cc32" id="cpick-6"></div>
                <div id="leg-square-6" class="legend-square-outline" style="border:solid 5px #32cc32;"></div>
              </div>
              <div style="padding:3px;">
                <div id='cwrap-5' class="color-picker-wrapper"><input type="color" value="#e72cdc" id="cpick-5"></div>
                <!-- <div id="leg-square-5" class="legend-square" style="background:#e72cdc"></div> -->
                <div id="leg-square-5" class="legend-square-outline" style="border: solid 5px #e72cdc"></div>
              </div>
            </div>
          </div>
          <div id="labels" style="padding-top:7px; position:absolute; top:0px; left:60px;">
            <div ondblclick="getCustomRange();">
              <div style="padding-top: 4.5px;"></div>
              <div class="legend-label" ><span id='leg-label-0'></span>&nbsp</div>
              <div style="padding-top: 4.5px;"></div>
              <div class="legend-label" ><span id='leg-label-1'></span>&nbsp</div>
              <div style="padding-top: 4.5px;"></div>
              <div class="legend-label" ><span id='leg-label-2'></span>&nbsp</div>
              <div style="padding-top: 4.5px;"></div>
              <div class="legend-label" ><span id='leg-label-3'></span>&nbsp</div>
              <div style="padding-top: 4.5px;"></div>
              <div class="legend-label" ><span id='leg-label-4'></span>&nbsp</div>
              <div style="padding-top: 4.5px;"></div>
            </div>
            <div style="position:relative; height: 25px;">
              <div>
                <img src="images/recycle.png" width="20" height="20" style="position: relative; left: -5px; cursor: pointer;" onclick="rePaint();">
              </div>
            </div>

            <div>
              <div id="LL1" style="padding-top: 5px;"></div>
              <div class="legend-label"><span id='leg-label-6' >Hover</span></div>
              <div id="LL2" style="padding-top: 7px;"></div>
              <div class="legend-label" ><span id='leg-label-5' >Held</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="geo-controls">
    <div id="geolocate" class="geolocate"></div>
    <div id="geocoder" class="geocoder"></div>
  </div>
  <div id="move-window">
    <div>
      <span id="m-name" style="font-size:22px;">Hover over something!</span>
    </div>
    <div>
      <span id="m-val" style="font-size:0px;"></span>
      &nbsp
      <span id="m-val2" style="font-size:0px;">ðŸ‘¤/mi<sup>2</sup></span>
    </div>
    <div>
      <span id="m-var" style="font-size:0px;"></span>
    </div>
  </div>
  <div id="tour">
    <div id="tour-window" class="tour">
      <div id="tour-text">

      </div>


    </div>
  </div>
  <script>
  setUpAll()

  mapboxgl.accessToken = 'pk.eyJ1Ijoic2FtbGVibGFuYyIsImEiOiJja2hneXNrOXUxOWdyMnF0OWgxdWRma3VsIn0.NClhc-lMIVbihpDxZ12YuQ';

  let map = initializeMap()
  setupMap(map)

  map.on('load', function () {
    main()
  });

  </script>
</body>
</html>
